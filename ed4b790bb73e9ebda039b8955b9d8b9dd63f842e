{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f516b7c9_63ee3f3b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000427
      },
      "writtenOn": "2022-04-13T04:18:27Z",
      "side": 1,
      "message": "JS: Can you please add \"PHAL: \" as prefix in the commit message header since it is specific to PHAL, right?\n\nWe are following that rule to add PHAL specific code.",
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "952b21e5_e511f986",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000359
      },
      "writtenOn": "2022-04-13T20:06:38Z",
      "side": 1,
      "message": "I don\u0027t understand how this is involved with PHAL.",
      "parentUuid": "f516b7c9_63ee3f3b",
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "697c9f65_279db88e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2022-04-14T04:16:05Z",
      "side": 1,
      "message": "This service is enabled for all types of systems.Not a PHAL specific .",
      "parentUuid": "952b21e5_e511f986",
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6ad1cc15_511848f0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000427
      },
      "writtenOn": "2022-04-14T04:43:16Z",
      "side": 1,
      "message": "It\u0027s my bad, just looked at the PHAL code, and did not look at the p9 specific code.",
      "parentUuid": "697c9f65_279db88e",
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53aba5c2_1f3e8b0e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1000427
      },
      "writtenOn": "2022-04-13T04:18:27Z",
      "side": 1,
      "message": "Can you please add the Tested tag with the test cases that you tried?\nit will be good if you added the systemd traces too",
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62ca157c_5d62c304",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2022-04-13T13:09:26Z",
      "side": 1,
      "message": "Yep, agree, we def are going to want the Tested logs showing this working as expected. Ben is still working on that.",
      "parentUuid": "53aba5c2_1f3e8b0e",
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ac30916_70f63969",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1000369
      },
      "writtenOn": "2022-08-10T19:27:10Z",
      "side": 1,
      "message": "Test case for stopping attention handler via op-stop-instructions service was verified by normal shutdown and journal entries.\nTest case for restarting attention handler during MPIPL enter sequence was verified by MPIPL and journal entries.\n                                                                                 \nBefore change to op-stop-instructions (and attn_handler) service                 \ngraceful shutdown - attention handler stopped during soft-off                    \nAug 10 13:22:28 rain135bmc phosphor-host-state-manager[756]: Host state transition request of xyz.openbmc_project.State.Host.Transition.Off\nAug 10 13:22:28 rain135bmc systemd[1]: Stopping The Attention Handler service... \nAug 10 13:22:29 rain135bmc systemd[1]: Starting PLDM soft power off app...       \nAug 10 13:22:29 rain135bmc systemd[1]: Stopped The Attention Handler service.    \n^^^ change moves this from here                                                   \nAug 10 13:22:38 rain135bmc systemd[1]: Finished PLDM soft power off app.         \nAug 10 13:22:38 rain135bmc systemd[1]: Reached target Stop Host0 (Pre).          \nAug 10 13:22:38 rain135bmc systemd[1]: Starting Stop instructions for host0...   \nAug 10 13:22:45 rain135bmc systemd[1]: Finished Stop instructions for host0.     \nAug 10 13:22:45 rain135bmc systemd[1]: Reached target Host0 (Stopping).          \nAug 10 13:22:45 rain135bmc systemd[1]: Reached target Host0 (Stopped).           \nAug 10 13:22:55 rain135bmc systemd[1]: Reached target Stop Host0.                 \n                                                                                 \nAfter change to op-stop-instructions (and attn_handler) service                  \ngraceful shutdown - attention handler stopped during stop-instructions           \nAug 10 17:34:28 p10bmc phosphor-host-state-manager[662]: Host state transition request of xyz.openbmc_project.State.Host.Transition.Off\nAug 10 17:34:28 p10bmc systemd[1]: Starting PLDM soft power off app...           \nAug 10 17:34:38 p10bmc systemd[1]: Finished PLDM soft power off app.             \nAug 10 17:34:38 p10bmc systemd[1]: Reached target Stop Host0 (Pre).              \nAug 10 17:34:39 p10bmc systemd[1]: Starting Stop instructions for host0...       \nAug 10 17:34:39 p10bmc systemd[1]: Stopping The Attention Handler service...     \nAug 10 17:34:39 p10bmc systemd[1]: Stopped The Attention Handler service.        \n^^^ to here                                                                      \nAug 10 17:34:45 p10bmc systemd[1]: Finished Stop instructions for host0.         \nAug 10 17:34:45 p10bmc systemd[1]: Reached target Host0 (Stopping).              \nAug 10 17:34:45 p10bmc systemd[1]: Reached target Host0 (Stopped).               \nAug 10 17:34:53 p10bmc systemd[1]: Reached target Stop Host0.                    \n                                                                                 \nAfter change to op-continue-mp-reboot service                                     \nMPIPL - attention handler is restarted during MPIPL continue                     \nAug 10 19:03:08 rain111bmc systemd[1]: Starting Continue mp reboot on host0...   \nAug 10 19:03:09 rain111bmc systemd[1]: Stopped The Attention Handler service.    \nAug 10 19:03:09 rain111bmc systemd[1]: Started The Attention Handler service.    \nAug 10 19:03:09 rain111bmc openpower-proc-control[10747]: IPL mode set to AUTOBOOT\nAug 10 19:03:09 rain111bmc openpower-proc-control[10747]: IPL type MPIPL         \nAug 10 19:03:09 rain111bmc openpower-proc-control[10747]: ipl_sbe_mpipl_continue: Enter(/proc0)\nAug 10 19:03:10 rain111bmc systemd[1]: Finished Continue mp reboot on host0.",
      "parentUuid": "62ca157c_5d62c304",
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2bc2bb46_574197b9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 16,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2022-08-11T04:52:09Z",
      "side": 1,
      "message": "Request is to add tested information as part of commit message. same info added here can move in commit message.",
      "parentUuid": "8ac30916_70f63969",
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "486f37a1_7b78152b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000359
      },
      "writtenOn": "2022-04-26T19:13:49Z",
      "side": 1,
      "message": "Still working on a complete fix for the issue.",
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d963bfb_a1db7a52",
        "filename": "service_files/op-stop-instructions@.service.in",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1000427
      },
      "writtenOn": "2022-04-13T04:18:27Z",
      "side": 1,
      "message": "I think, It starts and goes for the next ExecStart i.e LN-18 but, looks like we need to stop attn before the threadStopAll, right? If so, should we use \"ExecStartPre\"? @Andrew any thoughts?\n\nand I am not sure, explicitly calling the systemd stop service is recommended when there are \"Conflicts\" or \"ConditionPathExists\". I like to see @Andrew view on this.",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 9
      },
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56785b33_78ceb17d",
        "filename": "service_files/op-stop-instructions@.service.in",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1000004
      },
      "writtenOn": "2022-04-13T13:09:26Z",
      "side": 1,
      "message": "Yeah, this is like our 5th try on this. We can\u0027t use Conflicts because you can\u0027t guarantee the order the services shut down. So we\u0027ve got an issue currently where attn_handler stops before the pldm soft power off application completes (phyp graceful shutdown). So if PHYP crashes during that period of time, there\u0027s nothing to monitor that failure. This is a oneshot application so just adding a ExexStart is fine (systemd executes in the order they are in the file).",
      "parentUuid": "8d963bfb_a1db7a52",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 9
      },
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "670fd541_7c7f711a",
        "filename": "service_files/op-stop-instructions@.service.in",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2022-04-14T04:16:05Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "56785b33_78ceb17d",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 9
      },
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "07a7fb22_15d0942e",
        "filename": "service_files/op-stop-instructions@.service.in",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1000427
      },
      "writtenOn": "2022-04-14T04:43:16Z",
      "side": 1,
      "message": "Thanks, Andrew for the detailed information.",
      "parentUuid": "670fd541_7c7f711a",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 9
      },
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ecf44d80_e1d33576",
        "filename": "service_files/op-stop-instructions@.service.in",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2022-04-18T04:52:41Z",
      "side": 1,
      "message": "@andrew @zane . Stop instruction is used to stop the processor instruction. SBE is still active in this widow. And this will lead to stop listening the sbe related attentions. May be current use case this apprcch is good (?) . But still need to look functionally , this is the right place to do it.",
      "parentUuid": "07a7fb22_15d0942e",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 9
      },
      "revId": "ed4b790bb73e9ebda039b8955b9d8b9dd63f842e",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}